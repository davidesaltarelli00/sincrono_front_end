<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sincrono CRM</title>
    <style>
      #toolbar {
  background-color: #007bff; /* Colore blu aziendale */
  color: #ffffff; /* Testo bianco */
  display: flex;
  background-color: #333;
  justify-content: space-between; /* Allinea gli elementi a sinistra e a destra */
  align-items: center; /* Allinea verticalmente gli elementi al centro */
}

.logo-link {
  margin-right: 10px;
}

.toolbar-menu {
  display: flex;
  gap: 10px;
  background-color: #333;
  margin-right:auto;
}

.toolbar-link {
  text-decoration: none;
  color: #ffffff;
  /* padding: 10px; */
}

a{
  color: white;
}

.toolbar-link:hover {
  color: #d8d8d8;
}

.user-icon,
.logout-icon {
  color: #ffffff;
  cursor: pointer;
}

    </style>
  </head>

  <body>
    <!-- Mostra la toolbar solo se c'è un token -->

    <div
      class="container-toolbar"
      [hidden]="tokenProvvisorio != null && tokenProvvisorio == null"
    >
    <mat-toolbar id="toolbar" *ngIf="token">
      <!-- Logo e link alla home -->
      <a [routerLink]="['/home']" class="logo-link">
        <img class="logo-image" width="40" height="40" src="../../../../assets/images/logo.jpeg" alt="Logo">
      </a>


      <!-- Menu della toolbar -->
      <div class="toolbar-menu">
        <!-- Utilizza ngFor per generare le voci del menu dinamicamente -->
        <a   (click)="getPermissions(menuItem.id)" style="color: white;" class="toolbar-link" *ngFor="let menuItem of jsonData.list" [routerLink]="[menuItem.percorso]">
          {{ menuItem.nome }}
        </a>
      </div>

      <!-- Altri elementi della toolbar come il nome dell'utente loggato -->
      <span style="cursor: pointer;" mat-icon-button [routerLink]="['/profile-box']" class="user-icon">
        <small *ngIf="userRole===false">{{userLoggedName}} {{userLoggedSurname}} (Admin) &nbsp;</small>
        <small *ngIf="userRole===true">{{userLoggedName}} {{userLoggedSurname}} (Dipendente) &nbsp;</small> <i class="fa fa-user"></i>
      </span> &nbsp;&nbsp;
      <span style="cursor: pointer;" mat-icon-button (click)="logout()" class="logout-icon">
        <i class="fa fa-sign-out" aria-hidden="true"></i>
      </span>
    </mat-toolbar>

    </div>

    <!-- Mostra il form di login se non c'è un token e il recupero password non è attivo -->
    <!-- <div  *ngIf="!token && !isRecuperoPassword">
  <div class="login" >
    <app-login ></app-login>
  </div>
</div> -->

    <!-- Mostra il form di recupero password solo se c'è il token nel localStorage e il recupero password è attivo -->
    <div *ngIf="tokenProvvisorio && isRecuperoPassword">
      <app-form-recupero-password></app-form-recupero-password>
    </div>

    <!-- Router outlet per mostrare i componenti corrispondenti alle varie rotte -->
    <router-outlet></router-outlet>

    <footer *ngIf="token">
      <p>© {{currentDateTime}} CRM Sincrono. Tutti i diritti riservati.</p>
    </footer>
  </body>
</html>
